<!doctype html>
<html>
<head>
	<% include ../partials/head %>
	<script>
	document.addEventListener('DOMContentLoaded', function() {
		datepicker('#releaseDateInput', {
			formatter: (input, date, instance) => {
				input.value = date.toISOString().slice(0,10);
			}
		});
	});
	</script>
</head>
<body>
	<% include ../partials/navbar %>
	<div class="wrapper">

		<h2>Add New Show</h2>
		<form class="form-box" method="POST" action="/forms/addNewMovie">
			<div class="field">
				<label>Show Type: </label>
				<div class="values">
					<select name="showType" required>
						<option value="movie">Movie</option>
						<option value="tv-show">TV-show</option>
					</select>
				</div>
			</div>
            <hr/>
            <div class="field">
				<label>Name: </label>
				<div class="values">
					<textarea class="form-control" name="showName" rows="1" cols="50" required></textarea>
				</div>
			</div>
            <hr/>
            <div class="field">
				<label>Rating: </label>
				<div class="values">
					<select name="showRating" required>
						<% showRatingTypes.forEach(ratingType => { %>
							<option value="<%= ratingType %>"><%= ratingType %></option>
						<% }) %>
					</select>
				</div>
			</div>
            <hr/>
            <div class="field">
				<label>Release Date: </label>
				<div class="values">
					<input id="releaseDateInput" type="text" class="form-control" name="showRelease" required>
				</div>
			</div>
            <hr/>
            <div class="field">
				<label>Length: </label>
				<div class="values">
					<input type="number" class="form-control" name="showLength" placeholder="Length in minutes" required/>
				</div>
			</div>
			<hr/>
			<div class="field">
				<div class="label">&nbsp;</div>
				<% if (isLoggedIn) { %>
					<button type="submit">Submit new movie</button>
				<% } else { %>
					<a href="/login">Register</a>
					<span>&nbsp;or&nbsp;</span>
					<a href="/login?cont=<%= currentURL %>">login</a>
					<span>&nbsp;to submit a movie</span>
				<% } %>
			</div>
		</form>
	</div>
</body>
</html>